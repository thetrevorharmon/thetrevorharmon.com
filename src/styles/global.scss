@tailwind base;
@tailwind components;
@tailwind utilities;

@import './typography';
@import './components';
@import './syntaxHighlighting';

@supports (font-variation-settings: normal) {
  @import '~@fontsource/inter/variable-full.css';
}

@import '~@fontsource/fira-mono/400.css';

html {
  @screen base {
    font-size: 16px;
  }

  @screen collapsed {
    font-size: 15px;
  }
}

body {
  @media (prefers-color-scheme: light) {
    background-color: theme('colors.body-bg');
  }

  @media (prefers-color-scheme: dark) {
    background-color: theme('colors.body-bg-dark');
  }
}

body.light {
  color: theme('colors.text');
  background-color: theme('colors.body-bg');
}

body.dark {
  color: theme('colors.text-dark');
  background-color: theme('colors.body-bg-dark');
}

.body-styles {
  @apply text-text dark:text-text-dark;

  a {
    @apply Link;
  }

  a.Muted {
    @apply Link-Muted;
  }

  img {
    @apply bg-caption-bg dark:bg-caption-bg-dark;
  }

  h2,
  h3 {
    @apply leading-[1.2] text-text-bold dark:text-text-bold-dark;
  }

  h2 {
    @apply mt-large mb-small;
    @apply Text-Heading;
  }

  h3 {
    @apply mt-medium mb-small;
    @apply Text-Subheading;
  }

  p {
    @apply my-small;
  }

  img {
    margin-top: theme('space.little');
    margin-bottom: theme('space.little');

    /* 0px */
    @screen base {
      width: calc(100% + 50px);
    }

    /* ~560px */
    @screen collapsed {
      width: 100%;
    }

    /* ~640px */
    @screen expanded {
      width: theme('screens.expanded');
    }
  }

  ul,
  ol {
    margin-left: 0;
    padding-left: 0;

    counter-reset: list-counter;

    list-style-type: none;

    li {
      position: relative;
      padding-left: theme('space.medium');
      margin-bottom: theme('space.little');

      counter-increment: list-counter;

      &:last-child {
        margin-bottom: 0;
      }

      &:before {
        content: counter(list-counter) '.';
        position: absolute;
        left: 0;
        top: 0;

        @apply uppercase font-black italic;
      }
    }
  }

  ul li {
    &:before {
      content: 'â†’';
      font-style: normal;
    }
  }

  blockquote {
    @apply Blockquote;
    @apply Breakout;
  }

  &.projects {
    .gatsby-resp-image-wrapper {
      // These are the styles for @Breakout
      // I had to inline them here because @Breakout #{!important} didn't work
      // and these conflict with some default gatsby styling that I can't
      // seem to remove

      @apply -mx-container-base #{!important};
      @apply desktop:mx-0 #{!important};
      @apply expanded:-mx-breakout #{!important};

      @apply border border-img-border dark:border-img-border-dark;
    }

    span:first-of-type {
      @apply mt-huge block;
    }

    span + span {
      @apply mt-medium block;
    }

    span span.gatsby-resp-image-wrapper,
    span.gatsby-resp-image-wrapper,
    span.gatsby-resp-image-background-image {
      @apply mt-0;
    }
  }
}
